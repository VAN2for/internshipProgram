!function(){for(var i=0,n=["ms","moz","webkit","o"],e=0;e<n.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[n[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[e]+"CancelAnimationFrame"]||window[n[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var e=(new Date).getTime(),t=Math.max(0,16-(e-i)),a=window.setTimeout(function(){n(e+t)},t);return i=e+t,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){clearTimeout(i)})}(),qici.loadIndex=0,qici.allAssetLoaded=!1,qici.loadingHandler,qici.init=function(){function i(){if(qici.loadIndex===qici.scripts.length)return qc.gameObj=qici.loadGame(),void 0;var n=qici.scripts[qici.loadIndex],e=document.createElement("script");e.onerror=function(){console.log("Failed to load:",n),qici.loadIndex++,qici.loadingHandler&&qici.loadingHandler.progress(qici.loadIndex),i()},e.onload=function(){qici.loadIndex++,qici.loadingHandler&&qici.loadingHandler.progress(qici.loadIndex),i()},e.setAttribute("type","text/javascript"),"string"==typeof n?e.setAttribute("src",n):(e.setAttribute("src",n[0]),e.setAttribute("plugin_id",n[1])),document.getElementsByTagName("head")[0].appendChild(e)}var n=qici.scripts.length+qici.loadingAssetCount||0;document.getElementById("gameDiv").style.display="none",qici.loadingHandler&&qici.loadingHandler.start(n),i()},qici.loadingHandlerFinished=function(){var i=window[qici.config.gameInstance];if(!i.state.pendLoadComplete)return requestAnimationFrame(qici.loadingHandlerFinished),void 0;document.getElementById("gameDiv").style.display="block";var i=window[qici.config.gameInstance];delete i.state.pendLoadComplete,i.phaser.world&&(i.updateGameLayout(!0),i.updateScale(!0))},qici.loadAssetsNotify=function(){if(!qici.allAssetLoaded){qici.loadIndex++;var i=qici.scripts.length+qici.loadingAssetCount||0;qici.loadingHandler&&(qici.loadingHandler.progress(qici.loadIndex),qici.loadIndex>=i&&(qici.allAssetLoaded=!0,qici.loadingHandler.finish(),qici.loadingHandlerFinished()))}},qici.loadGame=function(){var i="100%",n="100%",e=qici.config.fixedGameSize;e&&e.enabled&&e.width>0&&e.height>0&&(i=e.width,n=e.height);var t=window[qici.config.gameInstance]=qc.gameOb=new qc.Game({width:i,height:n,parent:"gameDiv",state:qici.splashState,editor:qici.config.editor===!0,backgroundColor:new qc.Color(qici.config.backgroundColor),runInBackground:qici.config.runInBackground,useLanguages:qici.config.useLanguages,antialias:qici.config.antialias,resolution:qici.config.resolution,resolutionRatio:qici.config.resolutionRatio,transparent:qici.config.transparent,debug:qici.config.developerMode===!0,remoteLogUrl:qici.config.remoteLogUrl,customSettings:qici.config.customSettings,dirtyRectangles:qici.config.dirtyRectangles,dirtyRectanglesShow:qici.config.dirtyRectanglesShow,renderer:"Canvas"===qici.config.renderer?Phaser.CANVAS:Phaser.AUTO});return qc.N=function(i){return t.nodePool.findByName(i)},t.loadingProcessCallback=qici.loadAssetsNotify,t.localStorageID=qici.config.localStorageID,t.log.important("**** [QICI Engine]Starting game: {0}",qici.config.gameName),t},qici.splashState={init:function(){window[qici.config.gameInstance].fullScreen()},preload:function(){var i=window[qici.config.gameInstance];qici.config.loadingPrefab&&i.assets.load("__loading_prefab__",qici.config.loadingPrefab);var n=i.add.text();n.text="Initializing, please wait ...",n.setAnchor(new qc.Point(0,0),new qc.Point(1,1)),n.left=0,n.right=0,n.top=0,n.bottom=0,n.alignH=qc.UIText.CENTER,n.alignV=qc.UIText.MIDDLE,n.fontSize=24,n.color=new qc.Color(16777215),n.strokeThickness=2,n.stroke=new qc.Color(0),i._initText_=n,i.updateScale(!0)},create:function(){var i=window[qici.config.gameInstance];i.scene.entry=qici.config.entryScene,i.scene.list=qici.config.scene,qici.config.frameRate&&i.time.applyFrameRate(qici.config.frameRate);var n;if(qici.config.loadingPrefab){var e=i.assets.find("__loading_prefab__");e&&(n=i.add.clone(e),n.ignoreDestroy=!0,n.visible=!1)}i._initText_&&(n&&i._initText_.destroyImmediately(),delete i._initText_),i.scene.pendLoadComplete=!0,i.timer.add(1,function(){i.scene.load(i.scene.entry)})}};var svgHandler=function(){this.loadState="loading",this.loadingConfig={},this.tickIndex=-1,this.targetRotate=0,this.targetX=0,this.targetY=0,this.totalCount=0};svgHandler.prototype={},svgHandler.prototype.constructor=svgHandler,svgHandler.prototype.start=function(i){this.totalCount=i;var n=this.loadingConfig=qici.config.loading;this.loadingInterval=n.loadingInterval,this.brightingInterval=n.brightingInterval,this.blinkingCount=n.blinkingCount,this.blinkingInterval=n.blinkingInterval,this.fadingInInterval=n.fadingInInterval,this.fadingOutInterval=n.fadingOutInterval,this.startFadingInTime=null,this.startFadingOutTime=null,this._tick()},svgHandler.prototype.progress=function(){},svgHandler.prototype.finish=function(){this.tickIndex=(this.tickIndex+4)%20,this.tickIndex=(this.tickIndex-this.tickIndex%2)/2},svgHandler.prototype._tick=function(){var i=qici.loadingHandler;"done"===i.loadState},qici.config.loadingHandler&&"progressHandler"!==qici.config.loadingHandler||(qici.loadingHandler=new svgHandler);